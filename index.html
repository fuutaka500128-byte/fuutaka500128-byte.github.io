<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>新幹線発車案内</title>

<style>
body {
  margin: 0;
  background: black;
  color: white;
  font-family: "Helvetica Neue", Arial, sans-serif;
  overflow: hidden;
}

/* 下部スクロール枠 */
#ticker-area {
  position: fixed;
  bottom: 0;
  width: 100%;
  height: 90px;
  overflow: hidden;
  border-top: 2px solid #333;
}

/* 横スクロール本体 */
#ticker {
  display: flex;
  align-items: center;
  white-space: nowrap;
  animation: scroll 25s linear infinite;
}

/* 1列車 */
.train {
  display: flex;
  align-items: center;
  margin-right: 60px;
  font-size: 22px;
}

/* 列車色 */
.nozomi { color: #FFD700; }
.hikari { color: #FF4040; }
.mizuho { color: orange; }
.sakura { color: hotpink; }
.kodama { color: dodgerblue; }
.tsubame { color: deepskyblue; }

/* 時刻・行先 */
.time, .dest {
  color: white;
  margin-left: 20px;
}

@keyframes scroll {
  from { transform: translateX(100%); }
  to   { transform: translateX(-100%); }
}
</style>
</head>

<body>

<div id="ticker-area">
  <div id="ticker"></div>
</div>

<script>
const trains = [
  // ★ 順番はバラバラでもOK
  { name:"つばめ", class:"tsubame", no:"321号", time:"22:55", dest:"鹿児島中央" },
  { name:"みずほ", class:"mizuho", no:"612号", time:"22:30", dest:"鹿児島中央" },
  { name:"こだま", class:"kodama", no:"856号", time:"22:42", dest:"博多" }
];

function currentMinutes() {
  const now = new Date();
  return now.getHours() * 60 + now.getMinutes();
}

function timeToMinutes(t) {
  const [h, m] = t.split(":").map(Number);
  return h * 60 + m;
}

function render() {
  const ticker = document.getElementById("ticker");
  ticker.innerHTML = "";

  // ① 発車前のみ抽出
  let upcoming = trains.filter(t => timeToMinutes(t.time) > currentMinutes());

  // ② ★ 時刻順に自動ソート（ここが追加点）
  upcoming.sort((a, b) => {
    return timeToMinutes(a.time) - timeToMinutes(b.time);
  });

  // ③ 表示
  upcoming.forEach(tr => {
    const div = document.createElement("div");
    div.className = "train";
    div.innerHTML = `
      <span class="${tr.class}">${tr.name} ${tr.no}</span>
      <span class="time">${tr.time}</span>
      <span class="dest">${tr.dest}</span>
    `;
    ticker.appendChild(div);
  });
}

render();
setInterval(render, 60000);
</script>

</body>
</html>