<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>åšå¤šé§… æ–°å¹¹ç·š ç™ºè»Šæ¡ˆå†…</title>

<style>
body {
  margin: 0;
  background: #000;
  color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic ProN",
               "Yu Gothic", Meiryo, sans-serif;
}

h1 {
  text-align: center;
  margin: 10px 0;
  font-size: 20px;
}

#board {
  height: 70vh;
  overflow: hidden;
  padding: 0 10px;
}

.row {
  display: grid;
  grid-template-columns: 70px 70px 70px 1fr;
  border-bottom: 1px solid #333;
  padding: 6px 0;
  font-size: 16px;
}

.nozomi { color: #ffd400; }
.hikari { color: #00e5ff; }
.sakura { color: #ff8ad8; }
.mizuho { color: #ff9800; }
.kodama { color: #00ff7f; }
.tsubame { color: #aaa; }

.time { text-align: right; padding-right: 5px; }
</style>
</head>

<body>

<h1>åšå¤šé§… æ–°å¹¹ç·š ç™ºè»Šæ¡ˆå†…</h1>
<div id="board"></div>

<script>
const board = document.getElementById("board");
let rowsHTML = "";

function loadTimetable() {
  fetch("./hakata.json")
    .then(res => res.json())
    .then(data => {
      board.innerHTML = "";
      rowsHTML = "";

      const now = new Date();
      const nowMin = now.getHours() * 60 + now.getMinutes();

      data.forEach(t => {
        const [h, m] = t.time.split(":").map(Number);
        if (h * 60 + m < nowMin) return;

        const typeClass = {
          "ã®ãã¿":"nozomi","ã²ã‹ã‚Š":"hikari","ã•ãã‚‰":"sakura",
          "ã¿ãšã»":"mizuho","ã“ã ã¾":"kodama","ã¤ã°ã‚":"tsubame"
        }[t.type] || "";

        rowsHTML += `
          <div class="row">
            <div class="${typeClass}">${t.type}</div>
            <div>${t.number}å·</div>
            <div class="time">${t.time}</div>
            <div class="${typeClass}">${t.destination}</div>
          </div>
        `;
      });

      // ğŸ” å†…å®¹ãŒå°‘ãªãã¦ã‚‚æµã‚Œã‚‹ã‚ˆã†ã«è¤‡è£½
      board.innerHTML = rowsHTML + rowsHTML;
      board.scrollTop = 0;
    });
}

/* é›»å…‰æ²ç¤ºæ¿ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« */
setInterval(() => {
  board.scrollTop += 1;
  if (board.scrollTop >= board.scrollHeight / 2) {
    board.scrollTop = 0;
  }
}, 40);

loadTimetable();
setInterval(loadTimetable, 30000);
</script>

</body>
</html>